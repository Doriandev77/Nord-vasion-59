<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nord Ã‰vasion 59 â€“ Lâ€™aventure ultime</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; overflow-x:hidden; }
.menu-link:hover { color:#1D4ED8; font-weight:600; transition:0.3s; }
.card:hover { transform: translateY(-5px) scale(1.03); transition:0.5s; }
.card img { transition: transform 0.5s; }
#heroText { text-shadow: 0 0 20px rgba(0,0,0,0.7); }
</style>
</head>
<body class="bg-slate-900 text-white">

<!-- Hero & Particles -->
<div id="tsparticles" class="absolute inset-0 z-0"></div>
<section class="relative h-screen flex flex-col justify-center items-center text-center px-6">
  <h1 id="heroText" class="text-5xl md:text-7xl font-extrabold mb-6">Nord Ã‰vasion 59</h1>
  <p class="text-xl md:text-2xl mb-6">Voyager Ã  prix rÃ©duit pour des voyages qualitatifs</p>
  <button onclick="document.getElementById('tripSection').scrollIntoView({behavior:'smooth'})"
    class="bg-blue-600 hover:bg-blue-700 px-8 py-4 rounded-full text-xl font-bold animate-pulse">
    Partir Ã  lâ€™aventure
  </button>
</section>

<!-- Menu -->
<header class="fixed w-full top-0 z-50 bg-black/40 backdrop-blur-md px-6 py-4 flex justify-between items-center">
  <h2 class="text-2xl font-bold text-blue-400">Nord Ã‰vasion 59</h2>
  <nav class="flex gap-6 items-center text-white font-semibold">
    <a href="#ajouter" class="menu-link">Ajouter</a>
    <a href="#devenir-membre" class="menu-link">Devenir membre</a>
    <a href="#nous-contacter" class="menu-link">Nous contacter</a>
    <a href="#le-bureau" class="menu-link">Le bureau</a>
    <a href="#nos-partenaires" class="menu-link">Nos partenaires</a>
    <button onclick="toggleCart()" class="relative text-blue-400 font-bold">
      ðŸ›’ Panier
      <span id="cartCount" class="absolute -top-2 -right-3 bg-red-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
    </button>
  </nav>
</header>

<!-- Filtres & Voyages -->
<section id="tripSection" class="max-w-7xl mx-auto px-6 py-16">
  <div class="bg-white/10 rounded-xl p-6 mb-8 flex flex-col md:flex-row gap-4 flex-wrap items-center justify-between backdrop-blur-md">
    <input id="searchInput" type="text" placeholder="Rechercher un sÃ©jour..." 
      class="flex-1 border border-white/40 bg-white/5 rounded-lg px-4 py-3 focus:outline-none" oninput="renderTrips()">

    <select id="categoryFilter" class="border border-white/40 bg-white/5 rounded-lg px-4 py-3" onchange="renderTrips()">
      <option value="all">Toutes catÃ©gories</option>
      <option value="Mer">Mer</option>
      <option value="Montagne">Montagne</option>
      <option value="International">International</option>
      <option value="City trip">City trip</option>
    </select>

    <select id="durationFilter" class="border border-white/40 bg-white/5 rounded-lg px-4 py-3" onchange="renderTrips()">
      <option value="all">#Tous les sÃ©jours</option>
      <option value="journÃ©e">#JournÃ©e</option>
      <option value="long">#LongSÃ©jour</option>
    </select>
  </div>

  <!-- Voyages Grid -->
  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8" id="tripList"></div>
</section>

<!-- Panier futuriste -->
<div id="cartModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50 overflow-auto p-6">
  <div class="bg-slate-900 text-white w-full max-w-3xl rounded-xl p-6 shadow-2xl">
    <h3 class="text-2xl font-bold mb-4 text-blue-400">Votre panier & rÃ©servation</h3>
    <div id="cartItems" class="space-y-4"></div>
    <form id="bookingForm" class="mt-6 space-y-4">
      <label class="block">
        <span>Email de contact</span>
        <input type="email" id="clientEmail" required class="w-full px-3 py-2 rounded-lg bg-white text-black">
      </label>
      <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 py-3 rounded-lg font-bold transition-all">
        Envoyer mon devis
      </button>
    </form>
    <button onclick="toggleCart()" class="mt-4 w-full text-slate-400 hover:text-white">Fermer</button>
    <div class="flex justify-between mt-6 font-bold text-lg">
      <span>Total</span>
      <span id="cartTotal">0 â‚¬</span>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("YOUR_PUBLIC_KEY");

// Voyages
const trips = [
{id:"venise", title:"Carnaval de Venise", category:"International", duration:"long", dates:"11-16 fÃ©vrier", price:780, image:"https://images.unsplash.com/photo-1523906834658-6e24ef2386f9", desc:"Balades en gondole et soirÃ©es festives."},
{id:"nice", title:"Carnaval de Nice & Menton", category:"International", duration:"long", dates:"18-23 fÃ©vrier", price:765, image:"https://images.unsplash.com/photo-1502602898657-3e91760cbb34", desc:"Admirez les chars du Carnaval de Nice et la ville de Menton."},
{id:"portugal", title:"DÃ©couverte du Portugal", category:"International", duration:"long", dates:"8-18 mai", price:1610, image:"https://images.unsplash.com/photo-1505761671935-60b3a7427bad", desc:"Lisbonne, Porto, cÃ´tes atlantiques, gastronomie et plages."},
{id:"vienne", title:"Vienne & Budapest", category:"International", duration:"long", dates:"27 juin-4 juil", price:1275, image:"https://images.unsplash.com/photo-1528909514045-2fa4ac7a08ba", desc:"Capitales impÃ©riales avec visites guidÃ©es et croisiÃ¨res."},
{id:"lourdes", title:"Lourdes & PyrÃ©nÃ©es", category:"Montagne", duration:"long", dates:"26 juil-2 aoÃ»t", price:545, image:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee", desc:"RandonnÃ©es et spiritualitÃ© dans les PyrÃ©nÃ©es."},
{id:"versilia", title:"La Versilia â€“ CÃ´te TyrrhÃ©nienne", category:"Mer", duration:"long", dates:"6-12 sept", price:855, image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb", desc:"Plages et activitÃ©s nautiques."},
{id:"tyrol", title:"Transhumance au Tyrol", category:"Montagne", duration:"long", dates:"23-30 sept", price:1065, image:"https://images.unsplash.com/photo-1518659526055-5c148a6e1e90", desc:"RandonnÃ©es et traditions locales."},
{id:"rome", title:"Escapade Rome, Florence et Pise", category:"International", duration:"long", dates:"26 oct-1 nov", price:930, image:"https://images.unsplash.com/photo-1528909514045-2fa4ac7a08ba", desc:"Tour culturel Italie: Rome, Florence, Pise."},
{id:"lille_day", title:"DÃ©couverte de Lille", category:"City trip", duration:"journÃ©e", dates:"Samedi", price:95, image:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1", desc:"Exploration de Lille et son patrimoine."},
{id:"bruxelles_day", title:"Bruxelles express", category:"City trip", duration:"journÃ©e", dates:"Dimanche", price:110, image:"https://images.unsplash.com/photo-1518684079-01b7a62d3d43", desc:"Visite de la Grand Place et spÃ©cialitÃ©s belges."}
];

// Panier
let cart = JSON.parse(localStorage.getItem("ne59_cart"))||[];
function saveCart(){localStorage.setItem("ne59_cart",JSON.stringify(cart));document.getElementById("cartCount").textContent=cart.length;}
function toggleCart(){document.getElementById("cartModal").classList.toggle("hidden");renderCart();}
function addToCart(id){const trip=trips.find(t=>t.id===id);const exists=cart.find(i=>i.id===id);if(!exists)cart.push({...trip,qty:1,children:0});else exists.qty+=1;saveCart();renderCart();}
function removeFromCart(id){cart=cart.filter(i=>i.id!==id);saveCart();renderCart();}

function renderCart(){
const list=document.getElementById("cartItems");list.innerHTML="";let total=0;
cart.forEach(item=>{
const adults=item.qty||1; const children=item.children||0;
total+=adults*item.price+children*(item.price*0.7);
const li=document.createElement("div");
li.className="bg-white/5 p-4 rounded-lg";
li.innerHTML=`<div class="flex justify-between items-center">
<span class="font-semibold">${item.title}</span>
<button onclick="removeFromCart('${item.id}')" class="text-red-500 font-bold">âœ•</button>
</div>
<div class="mt-2 flex gap-4 items-center">
<label>Adultes: <input type="number" min="1" value="${adults}" class="w-20 border px-2 py-1 rounded" onchange="item.qty=parseInt(this.value);saveCart();renderCart();"></label>
<label>Enfants: <input type="number" min="0" value="${children}" class="w-20 border px-2 py-1 rounded" onchange="item.children=parseInt(this.value);saveCart();renderCart();"></label>
</div>
<p class="mt-2 font-semibold">Sous-total: ${adults*item.price+children*(item.price*0.7)} â‚¬</p>`;
list.appendChild(li);
});
document.getElementById("cartTotal").textContent=total+" â‚¬";
}

function renderTrips(){
const list=document.getElementById("tripList");list.innerHTML="";
const search=document.getElementById("searchInput").value.toLowerCase();
const category=document.getElementById("categoryFilter").value;
const duration=document.getElementById("durationFilter").value;
trips.filter(t=>t.title.toLowerCase().includes(search)&&(category==="all"||t.category===category)&&(duration==="all"||t.duration===duration))
.forEach(trip=>{
const card=document.createElement("div");card.className="card bg-white/5 rounded-xl shadow-lg overflow-hidden";
card.innerHTML=`<div class="h-64 overflow-hidden relative rounded-t-xl"><img src="${trip.image}" class="w-full h-full object-cover"></div>
<div class="p-6">
<span class="text-sm text-blue-400 font-medium">${trip.category}</span>
<h3 class="text-xl font-bold mt-2">${trip.title}</h3>
<p class="text-slate-300 text-sm mt-1">${trip.dates}</p>
<p class="text-slate-200 text-sm mt-2">${trip.desc}</p>
<p class="text-blue-400 font-bold mt-4">${trip.price} â‚¬</p>
<button onclick="addToCart('${trip.id}')" class="mt-4 w-full bg-blue-600 hover:bg-blue-700 py-2 rounded-lg font-bold transition-all">Ajouter au panier</button>
</div>`;
list.appendChild(card);
});
}

// Envoi devis
document.getElementById("bookingForm").addEventListener("submit",function(e){
e.preventDefault();
const email=document.getElementById("clientEmail").value;
let message=`Devis Nord Ã‰vasion 59 pour ${email}\n\n`;
cart.forEach(item=>{const adults=item.qty||1;const children=item.children||0;message+=`${item.title}\n Adultes:${adults}\n Enfants:${children}\n Sous-total:${adults*item.price+children*(item.price*0.7)} â‚¬\n\n`;});
emailjs.send("service_xxx","template_xxx",{message,to_email:"AGENCE_EMAIL@exemple.com"}).then(res=>alert("Devis envoyÃ© !")).catch(err=>alert("Erreur:"+err));
toggleCart();
});

// Init
renderTrips(); saveCart();

// Particules background
tsParticles.load("tsparticles", {
particles: {
number:{value:100}, color:{value:"#ffffff"}, shape:{type:"circle"}, opacity:{value:0.1}, size:{value:3},
move:{enable:true,speed:1,direction:"none",out_mode:"bounce"}
},
interactivity:{events:{onhover:{enable:true,mode:"repulse"}}},
background:{color:"#0f172a"}
});
</script>
</body>
</html>
