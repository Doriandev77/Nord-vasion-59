<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audi RS3 Luxury Rental</title>
<style>
body, html{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:'Inter', sans-serif;
}

canvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:9999;
  display:block;
}

.page{
  display:none;
  background:#111;
  color:white;
  min-height:100vh;
  padding:50px 10%;
  overflow-x:hidden;
}

h1{font-size:60px; margin-bottom:20px;}
h2{font-size:40px; margin-bottom:20px;}
p{color:#ccc; margin-bottom:40px;}
input, select, button{
  padding:15px;
  font-size:16px;
  border-radius:10px;
  border:none;
}
button{
  background:white;
  color:black;
  cursor:pointer;
  font-weight:700;
}
.summary{margin-top:20px; font-size:18px; font-weight:600;}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div class="page" id="mainPage">
<h1>Audi RS3 2025</h1>
<p>Le summum de la performance et du luxe. Réservez votre RS3 dès maintenant.</p>

<h2>Réservation</h2>
<form id="reservationForm">
  <label>Début :</label>
  <input type="date" id="startDate" required>
  <label>Fin :</label>
  <input type="date" id="endDate" required>
  <select id="location">
    <option>Paris</option>
    <option>Monaco</option>
    <option>Genève</option>
  </select>
  <button type="submit">Réserver</button>
</form>
<div class="summary" id="summary"></div>

<h2>Tarifs</h2>
<div>
  <p>1 jour : 490€</p>
  <p>2 jours : 950€</p>
  <p>Week-end : 1200€</p>
  <p>1 semaine : 3200€</p>
</div>
</div>

<script>
// ===============================
// CANVAS & FAISCEAUX
// ===============================
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const centerX = canvas.width/2;
const centerY = canvas.height/2;

// Définition des lettres R S 3 avec des points
// Chaque point = [x, y] relatif
const scale = 15;
const letters = {
  R:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,0],[2,0],[2,1],[1,2],[2,2],[1,3],[2,4]],
  S:[[0,0],[1,0],[2,0],[0,1],[0,2],[1,2],[2,2],[2,3],[0,4],[1,4],[2,4]],
  "3":[[0,0],[1,0],[2,0],[2,1],[1,2],[2,2],[2,3],[0,4],[1,4],[2,4]]
};

const sequence = ["R","S","3"];
let drawnPoints = [];

// Animation principale
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="white";
  ctx.shadowColor="white";
  ctx.shadowBlur=15;
  drawnPoints.forEach(pt=>{
    ctx.beginPath();
    ctx.arc(pt.x, pt.y, 6, 0, Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(draw);
}
draw();

// Animation séquentielle par lettre
async function animateLetter(letterArray, offsetX){
  return new Promise(resolve=>{
    let i=0;
    const interval = setInterval(()=>{
      if(i>=letterArray.length){
        clearInterval(interval);
        resolve();
        return;
      }
      const pt = letterArray[i];
      drawnPoints.push({
        x: centerX + (pt[0]-1)*scale*10 + offsetX,
        y: centerY + (pt[1]-2)*scale*10
      });
      i++;
    },100);
  });
}

// Séquence complète
async function animateSequence(){
  let offset = -150;
  for(let l of sequence){
    await animateLetter(letters[l], offset);
    offset += 150;
  }
  setTimeout(()=>{
    // disparition du canvas
    canvas.style.display="none";
    document.getElementById("mainPage").style.display="block";
    document.body.style.overflow="auto";
  },800);
}

// Lancer l'animation
animateSequence();

// ===============================
// FORMULAIRE RÉSERVATION
// ===============================
const form = document.getElementById("reservationForm");
form.addEventListener("submit", function(e){
  e.preventDefault();
  const start = new Date(document.getElementById("startDate").value);
  const end = new Date(document.getElementById("endDate").value);
  const diff = (end-start)/(1000*60*60*24)+1;
  if(diff<=0 || diff>7){
    document.getElementById("summary").innerText="Veuillez choisir 1 à 7 jours maximum.";
    return;
  }
  const pricePerDay = 490;
  const total = diff*pricePerDay;
  document.getElementById("summary").innerText=`Durée : ${diff} jour(s)\nTotal : ${total} €`;
});
</script>

</body>
</html>
