<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NovaLoc - Bot de R√©servation</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body,html{background:#0a0a0a;color:white;overflow:hidden;height:100vh;display:flex;justify-content:center;align-items:center;}
#chat-container{width:100%;max-width:500px;height:90vh;background:#111;border-radius:20px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 0 30px rgba(255,0,0,0.3);}
#messages{flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:15px;}
.message{max-width:80%;padding:12px 18px;border-radius:15px;position:relative;opacity:0;animation:fadeIn 0.3s forwards;}
.bot{background:#222;color:red;align-self:flex-start;}
.user{background:#333;color:white;align-self:flex-end;}
#choices{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;padding:10px;}
.choice-card{flex:1 1 40%;background:#222;border-radius:15px;padding:15px;text-align:center;cursor:pointer;transition:0.3s;box-shadow:0 0 10px rgba(255,255,255,0.05);}
.choice-card.prestige{box-shadow:0 0 20px rgba(255,0,0,0.7);border:2px solid red;transform:scale(1.05);}
.choice-card img{width:100%;border-radius:10px;margin-bottom:10px;}
#calendar-container{display:flex;flex-direction:column;gap:10px;padding:10px;display:none;}
input[type=date]{padding:12px;border-radius:10px;border:none;background:#222;color:white;}
button{padding:12px;border-radius:10px;border:none;background:red;color:white;font-weight:700;cursor:pointer;}
@keyframes fadeIn{to{opacity:1;}}
.typing{width:50px;height:10px;display:flex;gap:5px;align-items:center;}
.typing span{width:10px;height:10px;background:red;border-radius:50%;animation:typingAnim 1s infinite;}
.typing span:nth-child(2){animation-delay:0.2s;}
.typing span:nth-child(3){animation-delay:0.4s;}
@keyframes typingAnim{0%,80%,100%{transform:scale(0.5);opacity:0.3;}40%{transform:scale(1);opacity:1;}}
</style>
</head>
<body>

<div id="chat-container">
<div id="messages"></div>
<div id="choices"></div>
<div id="calendar-container">
<input type="date" id="startDate" required>
<input type="date" id="endDate" required>
<button id="confirmBtn">Confirmer</button>
<div class="summary" id="summary"></div>
</div>
</div>

<script>
const messages=document.getElementById("messages");
const choicesDiv=document.getElementById("choices");
const calendarContainer=document.getElementById("calendar-container");
const summary=document.getElementById("summary");

const vehicles=[
  {name:"Audi RS3 2025",price:490,img:"https://images.unsplash.com/photo-1621007947382-bb3c3994e3fb?auto=format&fit=crop&w=2000&q=80",prestige:2},
  {name:"BMW M5 2026",price:550,img:"https://images.unsplash.com/photo-1612556632370-3d1f4296c5aa?auto=format&fit=crop&w=2000&q=80",prestige:3},
  {name:"Mercedes AMG GT",price:600,img:"https://images.unsplash.com/photo-1597003791337-6f3cd9074b08?auto=format&fit=crop&w=2000&q=80",prestige:3}
];

function addMessage(text,from="bot"){
  const div=document.createElement("div");
  div.className="message "+from;
  div.textContent=text;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
  return new Promise(res=>setTimeout(res,500));
}

function addTyping(){
  const div=document.createElement("div");
  div.className="message bot";
  const t=document.createElement("div");
  t.className="typing";
  t.innerHTML="<span></span><span></span><span></span>";
  div.appendChild(t);
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
  return div;
}

async function botIntro(){
  let t=addTyping();
  await new Promise(r=>setTimeout(r,1500));
  t.remove();
  await addMessage("Bonjour et bienvenue chez NovaLoc üòé, votre assistant VIP de r√©servation de voitures de luxe !");
  await new Promise(r=>setTimeout(r,500));
  showVehicleChoices();
}

function showVehicleChoices(){
  choicesDiv.innerHTML="";
  vehicles.forEach(v=>{
    const card=document.createElement("div");
    card.className="choice-card"+(v.prestige>2?" prestige":"");
    card.innerHTML=`<img src="${v.img}" alt="${v.name}"><h4>${v.name}</h4><p>${v.price}‚Ç¨/jour</p>`;
    card.onclick=()=>selectVehicle(v);
    choicesDiv.appendChild(card);
  });
}

let selectedVehicle=null;

async function selectVehicle(v){
  selectedVehicle=v;
  choicesDiv.innerHTML="";
  await addMessage(`Excellent choix ! Vous avez s√©lectionn√© : ${v.name}`);
  setTimeout(()=>{calendarContainer.style.display="flex";},500);
}

// Reservation confirmation
document.getElementById("confirmBtn").addEventListener("click",()=>{
  const start=new Date(document.getElementById("startDate").value);
  const end=new Date(document.getElementById("endDate").value);
  const diff=(end-start)/(1000*60*60*24)+1;
  if(diff<=0||diff>7){
    summary.textContent="Veuillez choisir une dur√©e de 1 √† 7 jours.";
    return;
  }
  const total=diff*selectedVehicle.price;
  summary.textContent=`Votre r√©servation de ${selectedVehicle.name} pour ${diff} jour(s) co√ªtera ${total} ‚Ç¨. Merci d'avoir choisi NovaLoc !`;
  addMessage(`Votre r√©servation de ${selectedVehicle.name} pour ${diff} jour(s) est confirm√©e ! Prix total : ${total} ‚Ç¨`);
});

botIntro();
</script>

</body>
</html>
