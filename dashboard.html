<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard â€“ Nord Ã‰vasion 59</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-blue-50 text-slate-800">

<!-- Header -->
<header class="bg-white shadow px-8 py-4 flex justify-between items-center">
  <h1 class="text-2xl font-bold text-blue-700">Nord Ã‰vasion 59</h1>
  <div class="flex items-center gap-8">
    <span class="text-slate-600">Bonjour <strong id="user-name"></strong> ðŸ‘‹</span>
    <button onclick="toggleCart()" class="relative text-blue-700 font-semibold">
      Panier ðŸ›’
      <span id="cart-count" class="absolute -top-2 -right-3 bg-red-600 text-white text-xs w-5 h-5 rounded-full flex justify-center items-center">0</span>
    </button>
  </div>
</header>

<!-- Search & Filters -->
<section class="px-8 py-6 bg-white shadow-sm">
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
    <!-- Recherche texte -->
    <input id="searchText" type="text" placeholder="Rechercher une destination..." class="w-full md:w-1/2 border border-blue-200 rounded px-4 py-2 focus:outline-none" oninput="renderTrips()">
    <!-- Filtre catÃ©gories -->
    <select id="filterCategory" class="w-full md:w-1/4 border border-blue-200 rounded px-4 py-2" onchange="renderTrips()">
      <option value="all">Toutes catÃ©gories</option>
      <option value="Mer">Mer</option>
      <option value="Montagne">Montagne</option>
      <option value="City trip">City trip</option>
      <option value="International">International</option>
    </select>
  </div>
</section>

<!-- Trip List -->
<section class="p-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="trip-list"></section>

<!-- Cart -->
<div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-30 hidden items-center justify-center z-50">
  <div class="bg-white w-11/12 md:w-2/3 lg:w-1/2 p-6 rounded shadow-lg">
    <h2 class="text-xl font-semibold text-blue-700 mb-4">Panier</h2>
    <ul id="cart-items" class="space-y-4"></ul>
    <div class="mt-6 flex justify-between items-center">
      <strong>Total :</strong>
      <span id="cart-total" class="font-bold text-blue-700">0 â‚¬</span>
    </div>
    <button onclick="toggleCart()" class="mt-4 w-full bg-blue-700 text-white py-3 rounded">Fermer</button>
  </div>
</div>

<script>
/* DonnÃ©es des sÃ©jours */
const trips = [
  {
    id: "venise",
    title: "Carnaval de Venise",
    price: 780,
    dates: "11 fÃ©v â€“ 16 fÃ©v 2026",
    category: "International",
    description: "Visite Venise, VÃ©rone, bateau Ã  Burano.",
  },
  {
    id: "nice-menton",
    title: "Carnaval de Nice et Menton",
    price: 765,
    dates: "18 fÃ©v â€“ 23 fÃ©v 2026",
    category: "International",
    description: "Nice, Menton, Parfum Eze, marchÃ© aux fleurs.",
  },
  {
    id: "portugal",
    title: "SÃ©jour au Portugal",
    price: 1610,
    dates: "8 mai â€“ 18 mai",
    category: "International",
    description: "Bilbao, Porto, Lisbonne, croisiÃ¨re Douro.",
  },
  {
    id: "vienne-budapest",
    title: "Vienne & Budapest",
    price: 1275,
    dates: "27 juin â€“ 4 juil",
    category: "International",
    description: "DÃ©couverte Vienne & Budapest.",
  },
  {
    id: "lourdes",
    title: "Lourdes & PyrÃ©nÃ©es",
    price: 545,
    dates: "26 juil â€“ 2 aoÃ»t",
    category: "Montagne",
    description: "Montagne, marchÃ©s locaux.",
  },
  {
    id: "versilia",
    title: "La Versilia â€“ CÃ´te TyrrhÃ©nienne",
    price: 855,
    dates: "6 sept â€“ 12 sept",
    category: "Mer",
    description: "Cinque Terre, Chianti, mer.",
  },
  {
    id: "tyrol",
    title: "Transhumance au Tyrol",
    price: 1065,
    dates: "23 sept â€“ 30 sept",
    category: "Montagne",
    description: "Tyrol, traditions locales.",
  },
  {
    id: "rome-florence",
    title: "Escapade Rome, Florence et Pise",
    price: 930,
    dates: "26 oct â€“ 1er nov",
    category: "International",
    description: "Italie classique : Rome, Florence, Pise.",
  }
];

/* RÃ©cup prÃ©nom */
document.getElementById("user-name").textContent = localStorage.getItem("ne59_username") || "";

/* Panier */
let cart = JSON.parse(localStorage.getItem("ne59_cart")) || [];

function saveCart() {
  localStorage.setItem("ne59_cart", JSON.stringify(cart));
  document.getElementById("cart-count").textContent = cart.length;
}

function toggleCart() {
  document.getElementById("cart-modal").classList.toggle("hidden");
  renderCart();
}

function addToCart(id) {
  if (!cart.includes(id)) cart.push(id);
  saveCart();
}

function removeFromCart(id) {
  cart = cart.filter(i => i !== id);
  saveCart();
  renderCart();
}

/* Affichage */
function renderTrips() {
  const text = document.getElementById("searchText").value.toLowerCase();
  const category = document.getElementById("filterCategory").value;
  const container = document.getElementById("trip-list");
  container.innerHTML = "";

  trips.filter(trip => {
    const matchText = trip.title.toLowerCase().includes(text);
    const matchCat = category === "all" || trip.category === category;
    return matchText && matchCat;
  }).forEach(trip => {
    const card = document.createElement("div");
    card.className = "bg-white shadow rounded p-6";
    card.innerHTML = `
      <h3 class="text-xl font-semibold text-blue-700 mb-2">${trip.title}</h3>
      <p class="text-sm text-slate-600 mb-1">${trip.dates}</p>
      <p class="font-bold text-blue-600 mb-2">${trip.price} â‚¬</p>
      <p class="text-sm text-slate-700 mb-4">${trip.description}</p>
      <button onclick="addToCart('${trip.id}')" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">Ajouter au panier</button>
    `;
    container.appendChild(card);
  });
}

function renderCart() {
  const list = document.getElementById("cart-items");
  list.innerHTML = "";
  let total = 0;
  cart.forEach(id => {
    const trip = trips.find(t => t.id === id);
    total += trip.price;
    const li = document.createElement("li");
    li.className = "flex justify-between items-center";
    li.innerHTML = `
      <span>${trip.title} â€” ${trip.price} â‚¬</span>
      <button onclick="removeFromCart('${id}')" class="text-red-600">âœ•</button>
    `;
    list.appendChild(li);
  });
  document.getElementById("cart-total").textContent = total + " â‚¬";
}

renderTrips();
saveCart();
</script>

</body>
</html>
