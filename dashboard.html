<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard â€“ Nord Ã‰vasion 59</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
  body { font-family: 'Inter', sans-serif; }
</style>
</head>

<body class="bg-slate-100 text-slate-800">

<!-- Header -->
<header class="bg-white sticky top-0 z-40 shadow-sm">
  <div class="max-w-7xl mx-auto px-8 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold text-blue-600">Nord Ã‰vasion 59</h1>

    <button onclick="toggleCart()" class="relative text-blue-600 font-medium">
      Panier
      <span id="cartCount" class="absolute -top-2 -right-3 bg-blue-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
    </button>
  </div>
</header>

<!-- Hero -->
<section class="relative h-[40vh] bg-cover bg-center"
style="background-image:url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e');">
  <div class="absolute inset-0 bg-black/40"></div>

  <div class="relative z-10 h-full flex items-center max-w-7xl mx-auto px-8">
    <div>
      <h2 class="text-white text-4xl md:text-5xl font-bold mb-4">
        Bienvenue <span id="username"></span> ðŸ‘‹
      </h2>
      <p class="text-white/80 text-xl">
        OÃ¹ part-on cette annÃ©e ?
      </p>
    </div>
  </div>
</section>

<!-- Search -->
<section class="max-w-7xl mx-auto px-8 -mt-10 relative z-20">
  <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col md:flex-row gap-4">
    <input id="searchInput" type="text" placeholder="Rechercher une destination..."
      class="flex-1 border border-slate-200 rounded-lg px-4 py-3 focus:outline-none"
      oninput="renderTrips()">

    <select id="categoryFilter" class="border border-slate-200 rounded-lg px-4 py-3"
      onchange="renderTrips()">
      <option value="all">Toutes catÃ©gories</option>
      <option value="Mer">Mer</option>
      <option value="Montagne">Montagne</option>
      <option value="International">International</option>
    </select>
  </div>
</section>

<!-- Trips -->
<section class="max-w-7xl mx-auto px-8 py-16 grid sm:grid-cols-2 lg:grid-cols-3 gap-8" id="tripList"></section>

<!-- Cart -->
<div id="cartModal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
  <div class="bg-white w-full max-w-md rounded-xl p-6">
    <h3 class="text-xl font-semibold mb-4">Votre panier</h3>
    <ul id="cartItems" class="space-y-3"></ul>
    <div class="flex justify-between mt-6 font-bold">
      <span>Total</span>
      <span id="cartTotal">0 â‚¬</span>
    </div>
    <button onclick="toggleCart()" class="mt-6 w-full bg-blue-600 text-white py-3 rounded-lg">
      Fermer
    </button>
  </div>
</div>

<script>
const trips = [
  {
    id: "venise",
    title: "Carnaval de Venise",
    dates: "11 â€“ 16 fÃ©vrier 2026",
    price: 780,
    category: "International",
    image: "https://images.unsplash.com/photo-1523906834658-6e24ef2386f9"
  },
  {
    id: "nice",
    title: "Carnaval de Nice & Menton",
    dates: "18 â€“ 23 fÃ©vrier 2026",
    price: 765,
    category: "International",
    image: "https://images.unsplash.com/photo-1502602898657-3e91760cbb34"
  },
  {
    id: "portugal",
    title: "DÃ©couverte du Portugal",
    dates: "8 â€“ 18 mai",
    price: 1610,
    category: "International",
    image: "https://images.unsplash.com/photo-1505761671935-60b3a7427bad"
  },
  {
    id: "lourdes",
    title: "Lourdes & PyrÃ©nÃ©es",
    dates: "26 juillet â€“ 2 aoÃ»t",
    price: 545,
    category: "Montagne",
    image: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee"
  }
];

const username = localStorage.getItem("ne59_username") || "";
document.getElementById("username").textContent = username;

let cart = JSON.parse(localStorage.getItem("ne59_cart")) || [];

function renderTrips() {
  const list = document.getElementById("tripList");
  list.innerHTML = "";

  const search = document.getElementById("searchInput").value.toLowerCase();
  const category = document.getElementById("categoryFilter").value;

  trips.filter(t =>
    t.title.toLowerCase().includes(search) &&
    (category === "all" || t.category === category)
  ).forEach(trip => {
    const card = document.createElement("div");
    card.className = "bg-white rounded-xl shadow hover:shadow-xl transition overflow-hidden";
    card.innerHTML = `
      <div class="h-48 bg-cover bg-center" style="background-image:url('${trip.image}')"></div>
      <div class="p-6">
        <span class="text-sm text-blue-600 font-medium">${trip.category}</span>
        <h3 class="text-xl font-semibold mt-2">${trip.title}</h3>
        <p class="text-slate-500 text-sm mt-1">${trip.dates}</p>
        <p class="text-blue-600 font-bold mt-4">${trip.price} â‚¬</p>
        <button onclick="addToCart('${trip.id}')"
          class="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
          Ajouter au panier
        </button>
      </div>
    `;
    list.appendChild(card);
  });
}

function addToCart(id) {
  if (!cart.includes(id)) cart.push(id);
  localStorage.setItem("ne59_cart", JSON.stringify(cart));
  document.getElementById("cartCount").textContent = cart.length;
}

function toggleCart() {
  document.getElementById("cartModal").classList.toggle("hidden");
}

renderTrips();
document.getElementById("cartCount").textContent = cart.length;
</script>

</body>
</html>
